
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clinic Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .tab-button.active {
            background-color: #3b82f6;
            color: white;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .table-container {
            max-height: 400px;
            overflow-y: auto;
        }
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="hero-section text-white py-6 shadow-lg">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/201f45e4-b305-419d-9926-92a44ef5f81c.png" alt="Modern medical clinic logo with cross symbol and stethoscope on blue background" class="rounded-full">
                    <div>
                        <h1 class="text-3xl font-bold">Clinic Management System</h1>
                        <p class="text-blue-100">Comprehensive Healthcare Management Solution</p>
                    </div>
                </div>
                <div class="text-right">
                    <p class="text-sm text-blue-100">Connected to: CLINIC_SYSTEM_MANAGEMENT5</p>
                    <p class="text-xs text-blue-200">Version 2.0</p>
                </div>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-4 py-8">
        <!-- Navigation Tabs -->
        <div class="bg-white rounded-lg shadow-md mb-6 overflow-hidden">
            <div class="flex border-b border-gray-200">
                <button class="tab-button active px-6 py-4 text-sm font-medium text-gray-600 hover:text-blue-600 transition-colors duration-200" onclick="showTab('patients')">
                    <span class="flex items-center space-x-2">
                        <span>üë•</span>
                        <span>Patients</span>
                    </span>
                </button>
                <button class="tab-button px-6 py-4 text-sm font-medium text-gray-600 hover:text-blue-600 transition-colors duration-200" onclick="showTab('doctors')">
                    <span class="flex items-center space-x-2">
                        <span>üë®‚Äç‚öïÔ∏è</span>
                        <span>Doctors</span>
                    </span>
                </button>
                <button class="tab-button px-6 py-4 text-sm font-medium text-gray-600 hover:text-blue-600 transition-colors duration-200" onclick="showTab('clinics')">
                    <span class="flex items-center space-x-2">
                        <span>üè•</span>
                        <span>Clinics</span>
                    </span>
                </button>
                <button class="tab-button px-6 py-4 text-sm font-medium text-gray-600 hover:text-blue-600 transition-colors duration-200" onclick="showTab('appointments')">
                    <span class="flex items-center space-x-2">
                        <span>üìÖ</span>
                        <span>Appointments</span>
                    </span>
                </button>
            </div>
        </div>

        <!-- Patients Tab -->
        <div id="patients" class="tab-content active bg-white rounded-lg shadow-md p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Patient Management</h2>
                <div class="space-x-2">
                    <button onclick="loadPatients()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        Load Patients
                    </button>
                    <button onclick="showAddPatientModal()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        Add Patient
                    </button>
                </div>
            </div>
            
            <div class="table-container">
                <table class="w-full border-collapse border border-gray-300">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="border border-gray-300 px-4 py-2 text-left">Patient ID</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Name</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Address</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Birth Date</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Job</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="patientsTableBody">
                        <!-- Dynamic content will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Doctors Tab -->
        <div id="doctors" class="tab-content bg-white rounded-lg shadow-md p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Doctor Management</h2>
                <div class="space-x-2">
                    <button onclick="loadDoctors()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        Load Doctors
                    </button>
                    <button onclick="showAddDoctorModal()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        Add Doctor
                    </button>
                </div>
            </div>
            
            <div class="table-container">
                <table class="w-full border-collapse border border-gray-300">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="border border-gray-300 px-4 py-2 text-left">Doctor ID</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Name</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Address</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Department ID</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="doctorsTableBody">
                        <!-- Dynamic content will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Clinics Tab -->
        <div id="clinics" class="tab-content bg-white rounded-lg shadow-md p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Clinic Management</h2>
                <div class="space-x-2">
                    <button onclick="loadClinics()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        Load Clinics
                    </button>
                    <button onclick="showAddClinicModal()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        Add Clinic
                    </button>
                </div>
            </div>
            
            <div class="table-container">
                <table class="w-full border-collapse border border-gray-300">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="border border-gray-300 px-4 py-2 text-left">Clinic ID</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Name</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Address</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Department ID</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="clinicsTableBody">
                        <!-- Dynamic content will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Appointments Tab -->
        <div id="appointments" class="tab-content bg-white rounded-lg shadow-md p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Appointment Management</h2>
                <div class="space-x-2">
                    <button onclick="loadAppointments()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        Load Appointments
                    </button>
                    <button onclick="showAddAppointmentModal()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        Add Appointment
                    </button>
                </div>
            </div>
            
            <div class="table-container">
                <table class="w-full border-collapse border border-gray-300">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="border border-gray-300 px-4 py-2 text-left">Appointment ID</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Date</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Start Time</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">End Time</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Status</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Diagnosis</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Cost</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Patient ID</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Doctor ID</th>
                            <th class="border border-gray-300 px-4 py-2 text-left">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="appointmentsTableBody">
                        <!-- Dynamic content will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Patient Modal -->
    <div id="patientModal" class="modal">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-2xl">
            <h3 id="patientModalTitle" class="text-xl font-bold mb-6 text-gray-800">Add New Patient</h3>
            <form id="patientForm">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Patient ID</label>
                        <input type="number" id="patientId" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
                        <input type="text" id="patientName" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Address</label>
                        <input type="text" id="patientAddress" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Birth Date</label>
                        <input type="date" id="patientBirthDate" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Job</label>
                        <input type="text" id="patientJob" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                </div>
                <div class="flex justify-end space-x-3 mt-6">
                    <button type="button" onclick="closeModal('patientModal')" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        Cancel
                    </button>
                    <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        Save
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Doctor Modal -->
    <div id="doctorModal" class="modal">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-2xl">
            <h3 id="doctorModalTitle" class="text-xl font-bold mb-6 text-gray-800">Add New Doctor</h3>
            <form id="doctorForm">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Doctor ID</label>
                        <input type="number" id="doctorId" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
                        <input type="text" id="doctorName" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Address</label>
                        <input type="text" id="doctorAddress" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Department ID</label>
                        <select id="doctorDepartmentId" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                            <option value="">Select Department</option>
                            <option value="1">Ophtalmology</option>
                            <option value="2">Orthopedics</option>
                            <option value="3">Cardiology</option>
                            <option value="4">General Surgery</option>
                            <option value="5">Neurology</option>
                            <option value="6">Dermatology</option>
                            <option value="7">Psychiatry</option>
                            <option value="8">Otolaryngology(ENT)</option>
                            <option value="9">Pediatrics</option>
                            <option value="10">Urology</option>
                        </select>
                    </div>
                </div>
                <div class="flex justify-end space-x-3 mt-6">
                    <button type="button" onclick="closeModal('doctorModal')" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        Cancel
                    </button>
                    <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        Save
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Clinic Modal -->
    <div id="clinicModal" class="modal">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-2xl">
            <h3 id="clinicModalTitle" class="text-xl font-bold mb-6 text-gray-800">Add New Clinic</h3>
            <form id="clinicForm">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Clinic ID</label>
                        <input type="number" id="clinicId" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
                        <input type="text" id="clinicName" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Address</label>
                        <input type="text" id="clinicAddress" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Department ID</label>
                        <select id="clinicDepartmentId" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                            <option value="">Select Department</option>
                            <option value="1">Ophtalmology</option>
                            <option value="2">Orthopedics</option>
                            <option value="3">Cardiology</option>
                            <option value="4">General Surgery</option>
                            <option value="5">Neurology</option>
                            <option value="6">Dermatology</option>
                            <option value="7">Psychiatry</option>
                            <option value="8">Otolaryngology(ENT)</option>
                            <option value="9">Pediatrics</option>
                            <option value="10">Urology</option>
                        </select>
                    </div>
                </div>
                <div class="flex justify-end space-x-3 mt-6">
                    <button type="button" onclick="closeModal('clinicModal')" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        Cancel
                    </button>
                    <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        Save
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Appointment Modal -->
    <div id="appointmentModal" class="modal">
        <div class="bg-white rounded-lg p-8 max-w-lg w-full mx-4 shadow-2xl">
            <h3 id="appointmentModalTitle" class="text-xl font-bold mb-6 text-gray-800">Add New Appointment</h3>
            <form id="appointmentForm">
                <div class="space-y-4 grid grid-cols-2 gap-4">
                    <div class="col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Appointment ID</label>
                        <input type="number" id="appointmentId" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Date</label>
                        <input type="date" id="appointmentDate" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Cost</label>
                        <input type="number" id="appointmentCost" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Start Time</label>
                        <input type="time" id="appointmentStartTime" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">End Time</label>
                        <input type="time" id="appointmentEndTime" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                        <select id="appointmentStatus" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                            <option value="">Select Status</option>
                            <option value="Scheduled">Scheduled</option>
                            <option value="In Progress">In Progress</option>
                            <option value="Completed">Completed</option>
                            <option value="Postponed">Postponed</option>
                            <option value="Cancelled">Cancelled</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Patient ID</label>
                        <input type="number" id="appointmentPatientId" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Doctor ID</label>
                        <input type="number" id="appointmentDoctorId" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div class="col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Diagnosis</label>
                        <textarea id="appointmentDiagnosis" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" rows="3" required></textarea>
                    </div>
                </div>
                <div class="flex justify-end space-x-3 mt-6">
                    <button type="button" onclick="closeModal('appointmentModal')" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        Cancel
                    </button>
                    <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        Save
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Data storage (simulating database)
        let patients = JSON.parse(localStorage.getItem('patients')) || [
            {id: 14632, name: 'Ayaat Ahmed', address: 'Sheikh Zayed', birthDate: '1993-05-16', job: 'Software Engineer'},
            {id: 14633, name: 'Omar Khaled', address: 'Hadayek El Ahram', birthDate: '1976-08-19', job: 'Architect'},
            {id: 14634, name: 'Youssef Adel', address: '6th Of October', birthDate: '2005-03-23', job: 'Student'},
            {id: 14635, name: 'Kareem Moustafa', address: 'Warraq', birthDate: '1992-03-26', job: 'Doctor'},
            {id: 14636, name: 'Noureen Fathy', address: 'Mokattam', birthDate: '1985-02-22', job: 'Lawyer'}
        ];

        let doctors = JSON.parse(localStorage.getItem('doctors')) || [
            {id: 501, name: 'Dr. Ahmed Abd El Aziz', address: 'Helwan', departmentId: 1},
            {id: 502, name: 'Dr. Salma El Hefnawy', address: 'Maadi', departmentId: 2},
            {id: 503, name: 'Dr. Eman Saad', address: '6th Of October', departmentId: 3},
            {id: 504, name: 'Dr. Layla El Nagar', address: 'Giza', departmentId: 4},
            {id: 505, name: 'Dr. Khaled El Hosary', address: 'Haram', departmentId: 5}
        ];

        let clinics = JSON.parse(localStorage.getItem('clinics')) || [
            {id: 101, name: 'Eye Care Clinic', address: 'Zone A', departmentId: 1},
            {id: 102, name: 'Bone Clinic', address: 'Zone B', departmentId: 2},
            {id: 103, name: 'Heart Clinic', address: 'Zone C', departmentId: 3},
            {id: 104, name: 'Surgery Clinic', address: 'Zone D', departmentId: 4},
            {id: 105, name: 'Brain & Nerves Clinic', address: 'Zone E', departmentId: 5}
        ];

        let appointments = JSON.parse(localStorage.getItem('appointments')) || [
            {id: 401, date: '2019-06-15', cost: 150, startTime: '12:04', endTime: '12:25', status: 'Completed', diagnosis: 'Broken Leg', patientId: 14632, doctorId: 502},
            {id: 402, date: '2018-03-12', cost: 100, startTime: '08:15', endTime: '08:45', status: 'Completed', diagnosis: 'Ear infection', patientId: 14633, doctorId: 508},
            {id: 403, date: '2023-10-20', cost: 300, startTime: '10:30', endTime: '10:55', status: 'Completed', diagnosis: 'Appendix pain', patientId: 14634, doctorId: 504},
            {id: 404, date: '2023-02-01', cost: 200, startTime: '11:07', endTime: '11:40', status: 'Completed', diagnosis: 'Acne', patientId: 14635, doctorId: 506},
            {id: 405, date: '2024-12-15', cost: 500, startTime: '12:19', endTime: '12:45', status: 'Postponed', diagnosis: 'Anxiety', patientId: 14636, doctorId: 507}
        ];

        let editingItem = null;

        // Tab functionality
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.closest('.tab-button').classList.add('active');
        }

        // Modal functionality
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
            editingItem = null;
            clearForms();
        }

        function clearForms() {
            document.getElementById('patientForm').reset();
            document.getElementById('doctorForm').reset();
            document.getElementById('clinicForm').reset();
            document.getElementById('appointmentForm').reset();
        }

        // Patient functions
        function loadPatients() {
            const tbody = document.getElementById('patientsTableBody');
            tbody.innerHTML = '';
            
            patients.forEach(patient => {
                const row = `
                    <tr class="hover:bg-gray-50">
                        <td class="border border-gray-300 px-4 py-2">${patient.id}</td>
                        <td class="border border-gray-300 px-4 py-2">${patient.name}</td>
                        <td class="border border-gray-300 px-4 py-2">${patient.address}</td>
                        <td class="border border-gray-300 px-4 py-2">${patient.birthDate || 'N/A'}</td>
                        <td class="border border-gray-300 px-4 py-2">${patient.job}</td>
                        <td class="border border-gray-300 px-4 py-2">
                            <button onclick="editPatient(${patient.id})" class="bg-yellow-500 hover:bg-yellow-600 text-white px-2 py-1 rounded text-sm mr-1">Edit</button>
                            <button onclick="deletePatient(${patient.id})" class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm">Delete</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function showAddPatientModal() {
            document.getElementById('patientModalTitle').textContent = 'Add New Patient';
            document.getElementById('patientModal').classList.add('show');
            editingItem = null;
        }

        function editPatient(id) {
            const patient = patients.find(p => p.id === id);
            if (patient) {
                document.getElementById('patientModalTitle').textContent = 'Edit Patient';
                document.getElementById('patientId').value = patient.id;
                document.getElementById('patientName').value = patient.name;
                document.getElementById('patientAddress').value = patient.address;
                document.getElementById('patientBirthDate').value = patient.birthDate || '';
                document.getElementById('patientJob').value = patient.job;
                document.getElementById('patientId').disabled = true;
                editingItem = patient;
                document.getElementById('patientModal').classList.add('show');
            }
        }

        function deletePatient(id) {
            if (confirm('Are you sure you want to delete this patient?')) {
                patients = patients.filter(p => p.id !== id);
                localStorage.setItem('patients', JSON.stringify(patients));
                loadPatients();
                showNotification('Patient deleted successfully!', 'success');
            }
        }

        // Doctor functions
        function loadDoctors() {
            const tbody = document.getElementById('doctorsTableBody');
            tbody.innerHTML = '';
            
            doctors.forEach(doctor => {
                const row = `
                    <tr class="hover:bg-gray-50">
                        <td class="border border-gray-300 px-4 py-2">${doctor.id}</td>
                        <td class="border border-gray-300 px-4 py-2">${doctor.name}</td>
                        <td class="border border-gray-300 px-4 py-2">${doctor.address}</td>
                        <td class="border border-gray-300 px-4 py-2">${doctor.departmentId}</td>
                        <td class="border border-gray-300 px-4 py-2">
                            <button onclick="editDoctor(${doctor.id})" class="bg-yellow-500 hover:bg-yellow-600 text-white px-2 py-1 rounded text-sm mr-1">Edit</button>
                            <button onclick="deleteDoctor(${doctor.id})" class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm">Delete</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function showAddDoctorModal() {
            document.getElementById('doctorModalTitle').textContent = 'Add New Doctor';
            document.getElementById('doctorModal').classList.add('show');
            editingItem = null;
        }

        function editDoctor(id) {
            const doctor = doctors.find(d => d.id === id);
            if (doctor) {
                document.getElementById('doctorModalTitle').textContent = 'Edit Doctor';
                document.getElementById('doctorId').value = doctor.id;
                document.getElementById('doctorName').value = doctor.name;
                document.getElementById('doctorAddress').value = doctor.address;
                document.getElementById('doctorDepartmentId').value = doctor.departmentId;
                document.getElementById('doctorId').disabled = true;
                editingItem = doctor;
                document.getElementById('doctorModal').classList.add('show');
            }
        }

        function deleteDoctor(id) {
            if (confirm('Are you sure you want to delete this doctor?')) {
                doctors = doctors.filter(d => d.id !== id);
                localStorage.setItem('doctors', JSON.stringify(doctors));
                loadDoctors();
                showNotification('Doctor deleted successfully!', 'success');
            }
        }

        // Clinic functions
        function loadClinics() {
            const tbody = document.getElementById('clinicsTableBody');
            tbody.innerHTML = '';
            
            clinics.forEach(clinic => {
                const row = `
                    <tr class="hover:bg-gray-50">
                        <td class="border border-gray-300 px-4 py-2">${clinic.id}</td>
                        <td class="border border-gray-300 px-4 py-2">${clinic.name}</td>
                        <td class="border border-gray-300 px-4 py-2">${clinic.address}</td>
                        <td class="border border-gray-300 px-4 py-2">${clinic.departmentId}</td>
                        <td class="border border-gray-300 px-4 py-2">
                            <button onclick="editClinic(${clinic.id})" class="bg-yellow-500 hover:bg-yellow-600 text-white px-2 py-1 rounded text-sm mr-1">Edit</button>
                            <button onclick="deleteClinic(${clinic.id})" class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm">Delete</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function showAddClinicModal() {
            document.getElementById('clinicModalTitle').textContent = 'Add New Clinic';
            document.getElementById('clinicModal').classList.add('show');
            editingItem = null;
        }

        function editClinic(id) {
            const clinic = clinics.find(c => c.id === id);
            if (clinic) {
                document.getElementById('clinicModalTitle').textContent = 'Edit Clinic';
                document.getElementById('clinicId').value = clinic.id;
                document.getElementById('clinicName').value = clinic.name;
                document.getElementById('clinicAddress').value = clinic.address;
                document.getElementById('clinicDepartmentId').value = clinic.departmentId;
                document.getElementById('clinicId').disabled = true;
                editingItem = clinic;
                document.getElementById('clinicModal').classList.add('show');
            }
        }

        function deleteClinic(id) {
            if (confirm('Are you sure you want to delete this clinic?')) {
                clinics = clinics.filter(c => c.id !== id);
                localStorage.setItem('clinics', JSON.stringify(clinics));
                loadClinics();
                showNotification('Clinic deleted successfully!', 'success');
            }
        }

        // Appointment functions
        function loadAppointments() {
            const tbody = document.getElementById('appointmentsTableBody');
            tbody.innerHTML = '';
            
            appointments.forEach(appointment => {
                const row = `
                    <tr class="hover:bg-gray-50">
                        <td class="border border-gray-300 px-4 py-2">${appointment.id}</td>
                        <td class="border border-gray-300 px-4 py-2">${appointment.date}</td>
                        <td class="border border-gray-300 px-4 py-2">${appointment.startTime}</td>
                        <td class="border border-gray-300 px-4 py-2">${appointment.endTime}</td>
                        <td class="border border-gray-300 px-4 py-2">
                            <span class="px-2 py-1 rounded text-xs font-medium ${getStatusColor(appointment.status)}">
                                ${appointment.status}
                            </span>
                        </td>
                        <td class="border border-gray-300 px-4 py-2">${appointment.diagnosis}</td>
                        <td class="border border-gray-300 px-4 py-2">$${appointment.cost}</td>
                        <td class="border border-gray-300 px-4 py-2">${appointment.patientId}</td>
                        <td class="border border-gray-300 px-4 py-2">${appointment.doctorId}</td>
                        <td class="border border-gray-300 px-4 py-2">
                            <button onclick="editAppointment(${appointment.id})" class="bg-yellow-500 hover:bg-yellow-600 text-white px-2 py-1 rounded text-sm mr-1">Edit</button>
                            <button onclick="deleteAppointment(${appointment.id})" class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm">Delete</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function getStatusColor(status) {
            switch(status) {
                case 'Completed': return 'bg-green-100 text-green-800';
                case 'Scheduled': return 'bg-blue-100 text-blue-800';
                case 'In Progress': return 'bg-yellow-100 text-yellow-800';
                case 'Postponed': return 'bg-orange-100 text-orange-800';
                case 'Cancelled': return 'bg-red-100 text-red-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        function showAddAppointmentModal() {
            document.getElementById('appointmentModalTitle').textContent = 'Add New Appointment';
            document.getElementById('appointmentModal').classList.add('show');
            editingItem = null;
        }

        function editAppointment(id) {
            const appointment = appointments.find(a => a.id === id);
            if (appointment) {
                document.getElementById('appointmentModalTitle').textContent = 'Edit Appointment';
                document.getElementById('appointmentId').value = appointment.id;
                document.getElementById('appointmentDate').value = appointment.date;
                document.getElementById('appointmentCost').value = appointment.cost;
                document.getElementById('appointmentStartTime').value = appointment.startTime;
                document.getElementById('appointmentEndTime').value = appointment.endTime;
                document.getElementById('appointmentStatus').value = appointment.status;
                document.getElementById('appointmentDiagnosis').value = appointment.diagnosis;
                document.getElementById('appointmentPatientId').value = appointment.patientId;
                document.getElementById('appointmentDoctorId').value = appointment.doctorId;
                document.getElementById('appointmentId').disabled = true;
                editingItem = appointment;
                document.getElementById('appointmentModal').classList.add('show');
            }
        }

        function deleteAppointment(id) {
            if (confirm('Are you sure you want to delete this appointment?')) {
                appointments = appointments.filter(a => a.id !== id);
                localStorage.setItem('appointments', JSON.stringify(appointments));
                loadAppointments();
                showNotification('Appointment deleted successfully!', 'success');
            }
        }

        // Form submissions
        document.getElementById('patientForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const patientData = {
                id: parseInt(document.getElementById('patientId').value),
                name: document.getElementById('patientName').value,
                address: document.getElementById('patientAddress').value,
                birthDate: document.getElementById('patientBirthDate').value,
                job: document.getElementById('patientJob').value
            };

            if (editingItem) {
                const index = patients.findIndex(p => p.id === editingItem.id);
                patients[index] = patientData;
            } else {
                if (patients.find(p => p.id === patientData.id)) {
                    showNotification('Patient ID already exists!', 'error');
                    return;
                }
                patients.push(patientData);
            }

            localStorage.setItem('patients', JSON.stringify(patients));
            loadPatients();
            closeModal('patientModal');
            showNotification(`Patient ${editingItem ? 'updated' : 'added'} successfully!`, 'success');
            document.getElementById('patientId').disabled = false;
        });

        document.getElementById('doctorForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const doctorData = {
                id: parseInt(document.getElementById('doctorId').value),
                name: document.getElementById('doctorName').value,
                address: document.getElementById('doctorAddress').value,
                departmentId: parseInt(document.getElementById('doctorDepartmentId').value)
            };

            if (editingItem) {
                const index = doctors.findIndex(d => d.id === editingItem.id);
                doctors[index] = doctorData;
            } else {
                if (doctors.find(d => d.id === doctorData.id)) {
                    showNotification('Doctor ID already exists!', 'error');
                    return;
                }
                doctors.push(doctorData);
            }

            localStorage.setItem('doctors', JSON.stringify(doctors));
            loadDoctors();
            closeModal('doctorModal');
            showNotification(`Doctor ${editingItem ? 'updated' : 'added'} successfully!`, 'success');
            document.getElementById('doctorId').disabled = false;
        });

        document.getElementById('clinicForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const clinicData = {
                id: parseInt(document.getElementById('clinicId').value),
                name: document.getElementById('clinicName').value,
                address: document.getElementById('clinicAddress').value,
                departmentId: parseInt(document.getElementById('clinicDepartmentId').value)
            };

            if (editingItem) {
                const index = clinics.findIndex(c => c.id === editingItem.id);
                clinics[index] = clinicData;
            } else {
                if (clinics.find(c => c.id === clinicData.id)) {
                    showNotification('Clinic ID already exists!', 'error');
                    return;
                }
                clinics.push(clinicData);
            }

            localStorage.setItem('clinics', JSON.stringify(clinics));
            loadClinics();
            closeModal('clinicModal');
            showNotification(`Clinic ${editingItem ? 'updated' : 'added'} successfully!`, 'success');
            document.getElementById('clinicId').disabled = false;
        });

        document.getElementById('appointmentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const appointmentData = {
                id: parseInt(document.getElementById('appointmentId').value),
                date: document.getElementById('appointmentDate').value,
                cost: parseInt(document.getElementById('appointmentCost').value),
                startTime: document.getElementById('appointmentStartTime').value,
                endTime: document.getElementById('appointmentEndTime').value,
                status: document.getElementById('appointmentStatus').value,
                diagnosis: document.getElementById('appointmentDiagnosis').value,
                patientId: parseInt(document.getElementById('appointmentPatientId').value),
                doctorId: parseInt(document.getElementById('appointmentDoctorId').value)
            };

            if (editingItem) {
                const index = appointments.findIndex(a => a.id === editingItem.id);
                appointments[index] = appointmentData;
            } else {
                if (appointments.find(a => a.id === appointmentData.id)) {
                    showNotification('Appointment ID already exists!', 'error');
                    return;
                }
                appointments.push(appointmentData);
            }

            localStorage.setItem('appointments', JSON.stringify(appointments));
            loadAppointments();
            closeModal('appointmentModal');
            showNotification(`Appointment ${editingItem ? 'updated' : 'added'} successfully!`, 'success');
            document.getElementById('appointmentId').disabled = false;
        });

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg text-white z-50 ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 
                'bg-blue-500'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            loadPatients();
        });

        // Close modals when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('show');
                editingItem = null;
                clearForms();
            }
        });
    </script>
</body>
</html>

